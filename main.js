(()=>{(()=>{var R={1352:(i,c,r)=>{"use strict";r.r(c),r.d(c,{default:()=>h});var a=r(9431),o=r.n(a),u=r(183),P=r.n(u),y=P()(o());y.push([i.id,`body{background-color:#eee}
`,""]);const h=y},9400:(i,c,r)=>{"use strict";r.r(c),r.d(c,{default:()=>h});var a=r(9431),o=r.n(a),u=r(183),P=r.n(u),y=P()(o());y.push([i.id,`.error-mark[data-v-4107ec2f]{padding:8px;background:#fcc;white-space:pre;margin-bottom:8px;font-size:12px;font-family:monospace;overflow:auto;min-width:0}.my-column[data-v-4107ec2f]{min-width:0;flex:1 0 0;margin:8px}
`,""]);const h=y},1213:(i,c,r)=>{"use strict";r.r(c),r.d(c,{default:()=>h});var a=r(9431),o=r.n(a),u=r(183),P=r.n(u),y=P()(o());y.push([i.id,`.my-codemirror{text-align:left}.my-codemirror .CodeMirror{width:100%;height:80vh}
`,""]);const h=y},9120:(i,c,r)=>{"use strict";var a=r(5836),o=r(8541),u=r(6915),P=r(6256),y=r(6978),h=r(2683),x=r(3565);const A={__name:"CodeMirror",props:{code:String},emits:["update:code"],setup(e,{emit:s}){const _=e,n=(0,u.iH)();return(0,o.bv)(()=>{const l=y(n.value,{value:_.code,lineNumbers:!0,mode:"javascript"});(0,o.YP)(()=>_.code,d=>{l.getValue()!==d&&l.setValue(d)}),l.on("changes",()=>{const d=l.getValue();d!==_.code&&s("update:code",d)})}),(l,d)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"domEl",ref:n,class:"my-codemirror"},null,512))}};var F=r(2125);const B=A;var T=r(4834),z=r(9960),G=r(5549),t=r(7409);function K(e){if(Array.isArray(e))return e[e.length-1]}const j=e=>{if(t.isStringLiteral(e))return e.value;if(t.isIdentifier(e))return e.name;if(t.isNumericLiteral(e))return e.value;if(t.isTemplateLiteral(e)&&e.quasis.length===1)return e.quasis[0].value.cooked};function V(e,s,_=!1){if(t.isObjectExpression(e)){s=String(s);const n=e.properties.find(l=>t.isObjectMember(l)&&j(l.key)===s);if(!n)return t.unaryExpression("void",t.numericLiteral(0));if(t.isObjectMethod(n))return t.functionExpression(n.generator?n.key:null,n.params,n.body,n.generator,n.async);if(t.isObjectProperty(n))return n.shorthand?n.key:n.value}if(t.isArrayExpression(e)){if(s==="length")return e.elements.some(n=>t.isSpreadElement(n))?void 0:t.numericLiteral(e.elements.length);if(s=+s,Number.isInteger(s)&&s>=0){for(let n=0;n<e.elements.length;n++){const l=e.elements[n];if(t.isSpreadElement(l))return;if(n===s)return l}return t.unaryExpression("void",t.numericLiteral(0))}}if(_&&e&&M(e))return t.unaryExpression("void",t.numericLiteral(0))}function J(e){const s=[];if(t.isObjectExpression(e)){for(const _ of e.properties){if(t.isSpreadElement(_))return;const n=j(_.key);if(!n)return;s.push(n)}return s}if(t.isArrayExpression(e)){const _=e.elements;for(let n=0;n<_.length;n++){const l=_[n];if(l){if(t.isSpreadElement(l))return;s.push(String(n))}}return s}}function M(e){return!!(!e||t.isUnaryExpression(e)&&e.operator==="void"||t.isNullLiteral(e)||t.isIdentifier(e)&&e.name==="undefined")}const N=e=>{const s=K(e.node.leadingComments);if(s?.value.includes("#__PURE__"))return s.value="",e.remove(),!0},Q={visitor:{CallExpression(e){e.parentPath.isVariableDeclarator()&&!e.scope.getBinding(e.parentPath.get("id"))?.referenced&&N(e)||(e=e.parentPath).isExpressionStatement()&&N(e)},TemplateLiteral(e){const s=e.evaluate();s.confident&&e.replaceWith(t.stringLiteral(s.value))},"MemberExpression|OptionalMemberExpression"(e){M(e.node.object)&&e.node.optional&&e.replaceWith(t.unaryExpression("void",t.numericLiteral(0)))}}},H="#__DISPOSE__",$="#__DISPOSED__FUNCTION__",S=Symbol("__DISPOSE__");function I(e){return!!K(e?.leadingComments)?.value.includes(H)}function D(e){return!e||e[S]||((t.isLiteral(e)||M(e))&&(e[S]=!0),(t.isObjectExpression(e)||t.isArrayExpression(e))&&(I(e)||(e=t.addComment(e,"leading",H)),e[S]=!0)),e}function X(e){return e?e[S]?!0:!I(e)||!(t.isObjectExpression(e)||t.isArrayExpression(e)||t.isLiteral(e)||t.isFalsyNode(e))?!1:(e[S]=!0,!0):!1}function q(e){return e?.isFunction()?e.node[S]?!0:I(e.node)||e.parentPath?.isExportDeclaration()&&I(e.parent)||e.parentPath?.parentPath?.isVariableDeclaration()&&I(e.parentPath.parent)?(e.node[S]=!0,!0):!1:!1}function Z(e,s){for(;(e.parentPath.isMemberExpression()||e.parentPath.isOptionalMemberExpression())&&e.parent.object===e.node;){let _=e.parentPath.get("property"),n;if(e.parentPath.node.computed?n=_.evaluate().value:_.isIdentifier()&&(n=_.node.name),n==null)break;const l=V(s,n,e.parentPath.node.optional);if(!l)break;s=l,e=e.parentPath}return{path:e,replaceWith:s}}const ee={visitor:{VariableDeclarator(e){if(!X(e.node.init))return;const{scope:s}=e,_=[];let n=!1;l(e.get("id"),e.get("init").node,!0);function l(d,m,O){if(d.isIdentifier()){const g=s.getBinding(d.node.name);if(!g.constant){O?n=!0:_.push(t.variableDeclarator(d.node,m));return}g.referenced&&g.referencePaths.forEach(f=>{const E=Z(f,m);[f]=E.path.replaceWith(D(t.cloneDeepWithoutLoc(E.replaceWith))),f.parentPath.isSpreadElement()&&(f.isArrayExpression()&&f.parentPath.parentPath.isArrayExpression()&&f.parentPath.replaceWithMultiple(f.node.elements),f.isObjectExpression()&&f.parentPath.parentPath.isObjectExpression()&&f.parentPath.replaceWithMultiple(f.node.properties))});return}if(d.isObjectPattern()){if(!t.isArrayExpression(m)&&!t.isObjectExpression(m)){if(O)throw new Error("Cannot use destructing from a non-object");_.push(t.variableDeclarator(d.node,m));return}const g=new Set;d.get("properties").forEach(f=>{if(f.isObjectProperty()){const E=f.get("key");let v=f.get("value"),b;v.isAssignmentPattern()&&(b=v.get("right"),v=v.get("left"));let C=f.node.computed?E.evaluate().value:j(E.node);if(C===void 0)throw new Error("no fromPropertyId");let k=D(V(m,C));if(b&&(k=M(k)?b:k),!k)throw new Error("failed to destruct field: "+C);l(v,k),g.add(String(C))}if(f.isRestElement()){const E=[];if(t.isObjectExpression(m))m.properties.forEach(v=>{(t.isSpreadElement(v)||!g.has(j(v.key)))&&E.push(v)});else if(t.isArrayExpression(m))for(let v=0;v<m.elements.length;v++){const b=m.elements[v];if(b){if(t.isSpreadElement(b))throw new Error("not supported: destructing rest from array");E.push(t.objectProperty(t.stringLiteral(String(v)),b))}}l(f.get("argument"),D(t.objectExpression(E)))}});return}if(d.isArrayPattern()){if(!t.isArrayExpression(m)){if(O)throw new Error("Must be an array expression");_.push(t.variableDeclarator(d.node,m));return}let g=-1,f=d.get("elements");for(let E=0;E<f.length;E++){const v=D(m.elements[E])||t.unaryExpression("void",t.numericLiteral(0));t.isSpreadElement(v)&&(g=E);const b=f[E];if(b.node){if(b.isRestElement()&&(g===-1||g===E)){l(b.get("argument"),D(t.arrayExpression(m.elements.slice(E))));break}if(g!==-1)throw new Error('Currently not supported: taking a element from "restElement"');if((b.isIdentifier()||b.isObjectPattern()||b.isArrayPattern())&&l(b,v),b.isAssignmentPattern()){const C=M(v)?b.node.right:v;l(b.get("left"),C)}}}}}n||(_.length?e.replaceWithMultiple(_):e.remove(),s.crawl(),s.path?.visit())},"ObjectExpression|ArrayExpression"(e){if(!X(e.node))return;const s=Z(e,e.node);s.path!==e&&([e]=s.path.replaceWith(D(s.replaceWith)),e.findParent(_=>_.node?.leadingComments?.some(n=>n.value.includes($)))?.visit())}}},te={visitor:{CallExpression(e){const s=e.get("arguments")[0];if(e.node.arguments.length!==1||!(s.isObjectExpression()||s.isArrayExpression())||!t.matchesPattern(e.node.callee,["Object","keys"])||e.scope.getBinding("Object"))return;const _=J(s.node);if(_){let n=D(t.arrayExpression(Array.from(_,l=>t.stringLiteral(l))));e.replaceWith(n);return}if(s.isObjectExpression()){s.get("properties").forEach(n=>{const l=j(n.node.key);l&&n.replaceWith(t.objectProperty(t.stringLiteral(l),t.numericLiteral(1)))});return}s.isArrayExpression()&&s.get("elements").forEach(n=>{n.node&&!n.isSpreadElement()&&n.replaceWith(t.numericLiteral(1))})}}},re={visitor:{CallExpression(e){const s=e.get("callee");if(!s.isIdentifier())return;let n=e.scope.getBinding(s.node.name)?.path;if(n?.isVariableDeclarator()&&(n=n.get("init")),!n?.isFunction()||!q(n))return;const l=e.node.arguments;let d=t.cloneNode(n.node,!0);if(d.params.length>0){t.isExpression(d.body)&&(d.body=t.blockStatement([t.returnStatement(d.body)]));let O=[];if(l.some(g=>g.type==="SpreadElement"))O.push(t.variableDeclarator(t.arrayPattern(d.params),t.arrayExpression(l)));else for(let g=0;g<d.params.length;g++){const f=d.params[g];if(t.isRestElement(f)){O.push(t.variableDeclarator(f.argument,t.arrayExpression(l)));break}const E=l.shift()||t.unaryExpression("void",t.numericLiteral(0));t.isAssignmentPattern(f)?O.push(t.variableDeclarator(f.left,M(E)?f.right:E)):O.push(t.variableDeclarator(f,E))}d.params=[],d.body.body.unshift(t.variableDeclaration("var",O))}t.isFunctionDeclaration(d)&&(d=t.functionExpression(d.id,[],d.body,d.generator,d.async));let m=t.callExpression(d,[]);m=t.addComment(m,"leading",$),[e]=e.replaceWith(m)}}},ne={visitor:{CallExpression(e){const s=e.get("callee");if(!s.isFunction()||s.node.async||s.node.generator||s.node.params.length||e.node.arguments.length)return;let _=s.get("body");if(_.isBlockStatement()){let n,l=_.get("body");if(l.length!==0)if(l.length===1){const d=l[0];if(d.isReturnStatement())n=d.node.argument;else if(d.isExpressionStatement())n=t.unaryExpression("void",d.node.expression);else return}else return;e.replaceWith(n||t.unaryExpression("void",t.numericLiteral(0)))}else e.replaceWith(_.node)}}};function se(e){const s=[[z],[G],[Q],[ee],[re],[te],[ne]];return console.clear(),(0,T.transformSync)(e,{plugins:s}).code}const L=e=>((0,o.dD)("data-v-4107ec2f"),e=e(),(0,o.Cn)(),e),ie=L(()=>(0,o._)("h1",null,"babel-disposable",-1)),oe=L(()=>(0,o._)("p",null,[(0,o._)("a",{href:"https://github.com/lyonbot/babel-disposable"},"GitHub"),(0,o.Uk)(" | "),(0,o._)("a",{href:"https://lyonbot.github.io/babel-disposable"},"Demo"),(0,o.Uk)(" | "),(0,o._)("a",{href:"https://npmjs.org/babel-disposable"},"NPM")],-1)),ae={style:{display:"flex"}},le={class:"my-column"},_e=L(()=>(0,o._)("h2",null,"Input",-1)),de={class:"my-column"},ue=L(()=>(0,o._)("h2",null,"Output",-1)),ce={key:0,class:"error-mark"},fe=(0,o.aZ)({__name:"App",setup(e){let s=`
const secretSchema = /* #__DISPOSE__ */ {
  fields: {
    name: { type: "string" },
    age: { type: "number" },
    tel: { type: "string" },
  },
};

const tokens = /* #__DISPOSE__ */ ["token1", "token2", "token3", "token4", "token5", ...sys.tokens];

// ---------------------------------
// MAIN FUNCTION

function test() {
  const [, secondToken, , ...restTokens] = tokens;
  printToken(secondToken);
  printMoreTokens(restTokens);

  // ---------------------------------

  const source1 = /* #__PURE__ */ createRPCClient();
  const source1$schema = secretSchema;

  const { name: $nameField, ...restFields } = source1$schema.fields;
  printRestFieldIds(Object.keys(restFields));
  printRestFields(restFields);

  // ---------------------------------

  log('[name] type: ' + $nameField.type);
  log('[name] title: ' + ($nameField.title || "name"));
  log('[age]:', source1$schema.fields.age);

  // ----------------------------------

  return renderInput($nameField.type, { title: ($nameField.title || "name") })
}


/*#__DISPOSE__*/
function renderInput(type, props = {}) {
  if (type === 'string') return h('textInput', props);
  if (type === 'number') return h('numberInput', props);
}
`,_=(0,u.iH)(localStorage.getItem("lastCode")||s),n=(0,u.iH)(""),l=(0,u.iH)(null);(0,o.YP)(_,()=>{try{n.value=se(_.value)||"",l.value=null}catch(m){l.value=m,console.error(m)}},{immediate:!0}),(0,o.YP)(_,()=>{localStorage.setItem("lastCode",_.value)});const d=()=>{localStorage.removeItem("lastCode"),_.value=s};return(m,O)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[ie,oe,(0,o._)("div",ae,[(0,o._)("div",le,[_e,(0,o.Wm)(B,{code:(0,u.SU)(_),"onUpdate:code":O[0]||(O[0]=g=>(0,u.dq)(_)?_.value=g:_=g)},null,8,["code"]),(0,o._)("button",{onClick:d},"reset")]),(0,o._)("div",de,[ue,(0,u.SU)(l)?((0,o.wg)(),(0,o.iD)("div",ce,(0,P.zw)(String((0,u.SU)(l))),1)):(0,o.kq)("v-if",!0),(0,o.Wm)(B,{code:(0,u.SU)(n)},null,8,["code"])])])],64))}});var Ee=r(10),pe=r(2231);const me=(0,pe.Z)(fe,[["__scopeId","data-v-4107ec2f"]]);var ve=r(1834);const Y=document.createElement("div");document.body.appendChild(Y),(0,a.ri)(me).mount(Y)},1834:(i,c,r)=>{var a=r(1352);a.__esModule&&(a=a.default),typeof a=="string"&&(a=[[i.id,a,""]]),a.locals&&(i.exports=a.locals);var o=r(1813).Z,u=o("f1a91dde",a,!1,{})},10:(i,c,r)=>{var a=r(9400);a.__esModule&&(a=a.default),typeof a=="string"&&(a=[[i.id,a,""]]),a.locals&&(i.exports=a.locals);var o=r(1813).Z,u=o("03691ed4",a,!1,{})},2125:(i,c,r)=>{var a=r(1213);a.__esModule&&(a=a.default),typeof a=="string"&&(a=[[i.id,a,""]]),a.locals&&(i.exports=a.locals);var o=r(1813).Z,u=o("ec7b6e0a",a,!1,{})},4614:()=>{},4994:()=>{},9580:()=>{},6054:()=>{},6832:()=>{},4635:()=>{}},W={};function p(i){var c=W[i];if(c!==void 0)return c.exports;var r=W[i]={id:i,loaded:!1,exports:{}};return R[i].call(r.exports,r,r.exports,p),r.loaded=!0,r.exports}p.m=R,(()=>{var i=[];p.O=(c,r,a,o)=>{if(r){o=o||0;for(var u=i.length;u>0&&i[u-1][2]>o;u--)i[u]=i[u-1];i[u]=[r,a,o];return}for(var P=1/0,u=0;u<i.length;u++){for(var[r,a,o]=i[u],y=!0,h=0;h<r.length;h++)(o&!1||P>=o)&&Object.keys(p.O).every(T=>p.O[T](r[h]))?r.splice(h--,1):(y=!1,o<P&&(P=o));if(y){i.splice(u--,1);var x=a();x!==void 0&&(c=x)}}return c}})(),p.n=i=>{var c=i&&i.__esModule?()=>i.default:()=>i;return p.d(c,{a:c}),c},p.d=(i,c)=>{for(var r in c)p.o(c,r)&&!p.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:c[r]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),p.o=(i,c)=>Object.prototype.hasOwnProperty.call(i,c),p.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},p.nmd=i=>(i.paths=[],i.children||(i.children=[]),i),(()=>{var i={179:0};p.O.j=a=>i[a]===0;var c=(a,o)=>{var[u,P,y]=o,h,x,A=0;if(u.some(w=>i[w]!==0)){for(h in P)p.o(P,h)&&(p.m[h]=P[h]);if(y)var F=y(p)}for(a&&a(o);A<u.length;A++)x=u[A],p.o(i,x)&&i[x]&&i[x][0](),i[x]=0;return p.O(F)},r=self.webpackChunkbabel_disposable=self.webpackChunkbabel_disposable||[];r.forEach(c.bind(null,0)),r.push=c.bind(null,r.push.bind(r))})();var U=p.O(void 0,[690],()=>p(9120));U=p.O(U)})();})();
